\ProvidesPackage{chorder}[2025]

\usepackage{tikz}
\usetikzlibrary{decorations.markings}

\definecolor{guitargrey}{rgb}{0.666,0.666,0.666}

% Style to create a colour gradient along a path
\tikzset{colourpath/.style n args={3}{
    postaction={
        decorate,
        decoration={
            markings,
            mark=between positions 0 and \pgfdecoratedpathlength step 0.5pt with {
                \pgfmathsetmacro\myval{
                    multiply(
                        divide(
                            \pgfkeysvalueof{/pgf/decoration/mark info/distance from start},
                            \pgfdecoratedpathlength
                        ),
                        100
                    )
                }
                \pgfsetfillcolor{#3!\myval!#2}
                \pgfpathcircle{\pgfpointorigin}{#1}
                \pgfusepath{fill}
            }
        }
    }
}}

% Environment to draw a fretboard to put chords on
\newenvironment{chorder}[1][1]{%
    \begin{tikzpicture}
        \begin{scope}[xscale=#1, yscale=0.666*#1, very thick, font=\footnotesize]
            \foreach \x in {0.5,...,3.5}{
                \draw[guitargrey] (-0.5,\x) -- (11.5,\x);
            }
            \foreach \x in {-0.5,...,11.5}{
                \draw[guitargrey] (\x,0.5) -- (\x,4);
            }
            \fill[guitargrey] (-0.5,0.5) rectangle (0.5,4);
            \foreach \x in {3,5,7,9}{
                \fill[guitargrey] (\x,3.5) circle (0.2 and 0.3);
        }
}{%
        \end{scope}
    \end{tikzpicture}
}